{% load static %}
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Proforma PDF</title>
  <style>
    @page { margin: 0; }
    body { font-family: sans-serif; font-size: 11pt; line-height: 1.5; color: #333; position: relative; }
    header, footer { position: fixed; left: 0; right: 0; height: 100px; }
    header { top: 5;}
    footer { bottom: 0;}
    main { padding: 1cm; }
    .content { margin-top: 50px; margin-bottom: 50px; }
    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 8pt;
      }
      
      th, td {
        padding: 8px;
        text-align: left;
        border: none; /* çizgileri kaldır */
      }
      
      th {
        background-color: #f2f2f2;
        font-size: 9pt;
        font-weight: bold;
        color: #5a5388; /* başlık yazı rengi */
      }

    .info p { margin: 5px 0; }
    h1 { text-align: center; color: #5a5388; }
    .logo-top { width: 100%; margin-bottom: 20px; }
    .logo-footer { width: 100%; }
    a { text-decoration: none; color: #000; /* başlık yazı rengi */}
  </style>
</head>
<body>

<header>
  <img src="{% static 'images/header.png' %}" class="logo-top">
</header>


<footer>
    <div style="
    position: relative;
    width: 100%;
    height: 110px;
    background-image: url('{% static 'images/footer.png' %}');
    background-size: cover;
    background-repeat: no-repeat;
    padding: 10px 30px;
    font-size: 8pt;
    color: #000;
    box-sizing: border-box;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  ">
  
    <!-- Banka Bilgileri (sola yapışık, iki satır eşit başlar) -->
    <div style="width: 80%;">
      <p style="margin: 2px 0; color: #5a5388;"><strong>GAMA SAĞLIK HİZMETLERİ SANAYİ ve TİCARET LİMİTED ŞİRKETİ</strong> - Banka Hesap Bilgileri</p>
      <p style="font-size: 12pt; color:#ffffff;"><strong>Ziraat Bankası (TL)</strong> : TR570001000579959905875010</p>
    </div>
  
    <!-- QR Kod (en sağda, dik hizalanmış) -->
    <div style="width: 30%; text-align: right;">
      <img src="{% static 'images/bankaQR.png' %}" alt="QR Kod"
           style="height: 60px; object-fit: contain;">
    </div>
  
  </div>
</footer>


<main>

    <div class="content">
        <h1 style="text-align: center;">PROFORMA FATURA</h1>
        <hr>
        <!-- Üst Bilgi Kutusu -->
        <div style="display: flex; justify-content: space-between;">
            <!-- Firma Bilgileri Sol Tarafta -->
            <div style="font-size: 10pt; line-height: 1;">
              <p style="margin: 0 0 10px 0;"><strong>GAMA SAĞLIK HİZMETLERİ SAN. ve TİC. LTD. ŞTİ.</strong></p>
              <p style="margin: 0 0 0 0;"><strong>A: </strong>Mimar Sinan Mahallesi 171. Sokak No:23/C Kapaklı / Tekirdağ / <strong>TÜRKİYE</strong></p>
            </div>
          
            <!-- Tarih Sağ Üste -->
            <div style="text-align: right; font-size: 10pt;">
              <p style="margin: 0;"><strong>{{ invoice.created_at|date:"d.m.Y" }}</strong></p>
            </div>
          </div>
          
          <!-- İletişim Bilgileri (boşluğu eşit hale getirdik) -->
          <div style="font-size: 8pt; line-height: 1;">
            <p style="margin: 10px 0 0 0;">
              <strong>W:</strong> <a href="https://gamasaglik.com/en/" target="_blank"  style="text-decoration: none">www.gamasaglik.com</a>&emsp;&emsp;
              <strong>E:</strong> <a href="mailto:info@gamasaglik.com">info@gamasaglik.com</a>&emsp;&emsp;
              <strong>M1:</strong> <a href="tel:+905323681254">+905323681254</a>&emsp;&emsp;
              <strong>M2:</strong> <a href="tel:+905550323244">+905550320444</a>&emsp;&ensp;&nbsp;
              <strong>VKN:</strong> 3881441893
            </p>
          </div>
          
        <hr>
      
        <!-- Müşteri ve Fatura Bilgileri -->
        <div style="font-size: 10pt; margin-top: 1px; margin-bottom: 0;">
            <p style="margin-bottom: 20px;"><strong>{{ invoice.company_name }}</strong></p>
        </div>

    <table>
      <thead>
        <tr>
          <th>Ürün Açıklaması ve Ölçüsü<br><span style="font-size: 7pt; font-style: italic;">(Product Descriptions and Size)</span></th>
          <th style="text-align: center;">Miktar<br><span style="font-size: 7pt; font-style: italic;">(Quantity)</span></th>
          <th style="text-align: center;">Ürün Fiyatı<br><span style="font-size: 7pt; font-style: italic;">(Product Price)</span></th>
          <th style="text-align: center;">Toplam Tutar<br><span style="font-size: 7pt; font-style: italic;">(Total Amount)</span></th>
        </tr>
      </thead>
      <tbody>
        {% for item in invoice.items.all %}
        <tr>
          <td><strong>{{ item.product.name_tr }}</strong><br><span style="font-size: 7pt; font-style: italic;">({{ item.product.name_en }})</span></td>
          <td style="text-align: center;"><strong>{{ item.quantity }}</strong></td>
          <td style="text-align: center;"><strong>{{ item.unit_price }} {{ invoice.get_currency_display }}</strong></td>
          <td style="text-align: center;"><strong>{{ item.total_price }} {{ invoice.get_currency_display }}</strong></td>
        </tr>
        {% empty %}
        <tr><td colspan="5">Ürün bulunamadı.</td></tr>
        {% endfor %}
      </tbody>
    </table>
    <table style="width: 100%; font-size: 8pt; margin-top: 20px; border-collapse: collapse;">
      <tr>
        <td style="width: 80%; text-align: right; padding: 2px 6px;"><strong>Toplam:</strong></td>
        <td style="width: 20%; text-align: right; padding: 2px 12px; white-space: nowrap;">
          <strong>{{ invoice.get_total_amount }} {{ invoice.get_currency_display }}</strong>
        </td>
      </tr>
      <tr>
        <td style="text-align: right; padding: 2px 6px;">
          <strong>KDV (%{{ invoice.vat_rate }}):</strong>
        </td>
        <td style="text-align: right; padding: 2px 12px; white-space: nowrap;">
          <strong>{{ invoice.get_vat_amount }} {{ invoice.get_currency_display }}</strong>
        </td>
      </tr>
      <tr>
        <td style="text-align: right; padding: 2px 6px;">
          <strong>Genel Toplam:</strong>
        </td>
        <td style="text-align: right; padding: 2px 12px; white-space: nowrap;">
          <strong>{{ invoice.get_grand_total }} {{ invoice.get_currency_display }}</strong>
        </td>
      </tr>
      <tr>
        <td style="text-align: right; padding: 2px 6px;">
          <strong>Kur:</strong>
        </td>
        <td style="text-align: right; padding: 2px 12px; white-space: nowrap;">
          <strong>{{ invoice.exchange_rate }}</strong>
        </td>
      </tr>
      <tr>
        <td style="text-align: right; padding: 2px 6px;">
          <strong>TL Karşılığı:</strong>
        </td>
        <td style="text-align: right; padding: 2px 12px; white-space: nowrap;">
          <strong>{{ invoice.get_tl_grand_total|floatformat:4 }} ₺</strong>
        </td>
      </tr>
    </table>

</main>

</body>
</html>
